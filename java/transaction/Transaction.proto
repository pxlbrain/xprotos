syntax = "proto3";

package ai.pixlbrain.backend;
import "inventory/Void.proto";
import "product/Product.proto";

service TransactionService {
  rpc GetTransaction (TransactionId) returns (Transaction) {}
  rpc GetAllTransactions (TransactionRequest) returns (GRPCGetTransactionResponse) {}
}

message GRPCGetTransactionResponse {
  int32 page = 1;
  int32 size = 2;
  int32 count = 3;
  repeated Transaction transactions = 4;
}

message Transaction {
  string id = 1;
  string client = 2;
  string locationId = 3;
  string time = 4;
  string trayId = 5;
  string transactionStatus = 6;
  repeated Frame frames = 7;
  repeated TrayStatus trayStatusList = 8;
  string filter = 9;
  string deviceId = 10;
}

message Frame {
  string path = 1;
  repeated Bbs bbs = 2;
}

message Bbs {
  double x1 = 1;
  double x2 = 2;
  double y1 = 3;
  double y2 = 4;
}

message TrayStatus {
  string status = 1;
  string rescanned = 2;
  repeated TransactionItem items = 3;
}

message TransactionItem {
  string quantity = 1;
  string productId =2;
  string productName = 3;
  string category = 4;
  string subCategory = 5;
  string width = 7;
  string height = 8;
}

message QueryParam {
  string fieldName = 1;
  string operator = 2;
  string value = 3;
}

message TransactionRequest {
  string locationId = 1;
  repeated GRPCFilter filter = 2;
  GRPCPaging paging = 3;
  GRPCSorting sorting = 4;
}

message Transactions {
  repeated Transaction transactions = 1;
}

message TransactionItems {
  repeated TransactionItem transactionItems = 1;
}

message TransactionId {
  string id = 1;
}

